PRO make_JPEG, data, FileName=filename, Path=path;; Make a JPEG image of data;CD, current=thisDirectoryIF KEYWORD_SET(path) THEN CD, path;; Render graphic in Z-buffer.;thisDevice = !D.NAMESET_PLOT, 'Z'ERASEDEVICE, SET_RESOLUTION=[400, 400];; Plot Data in Z-buffer;Shade_Surf, datathisImage = TVRD()TVLCT, r, g, b, /GETSET_PLOT, thisDevice; Write JPEG file.image24 = BYTARR(3, 400, 400)image24(0,*,*) = r(thisImage)image24(1,*,*) = g(thisImage)image24(2,*,*) = b(thisImage)WRITE_JPEG, filename, image24, TRUE=1, QUALITY=100;; Final Duties;CD, thisdirectorySET_PLOT, thisDeviceRETURNEND